{
      "Id": "Flow_a815c931-b2ca-413e-b0d1-9c5464ed02f7",
      "Name": "7.[å»£å‘Šç”Ÿæˆ]å…¥å£",
      "IsModuleFlow": false,
      "Description": "",
      "StartNodeId": "Node_3g6ms5f0uy",
      "Nodes": [
        {
          "Id": "Node_oozn4a179k",
          "Type": "flow.begin",
          "Name": "å‘¼å«APIç”¢ç”Ÿæ–‡æ¡ˆ",
          "Delay": 0,
          "Actions": [
            {
              "_Id": "NodeAction_3hmrfk8iu04c511bm4sf",
              "Type": "none",
              "Rules": [],
              "Priority": 50,
              "NextNodeId": "Node_d6ydx5tek3"
            }
          ],
          "VariableActions": [
            {
              "_Id": "Variable_dzr5dhisdab9ads2ybjg",
              "Type": "variable.set",
              "TriggerType": "before_node",
              "Variable": "callCondition",
              "VariableType": "global",
              "AssignValue": "{\n    \"temperature\":1,\n    \"max_tokens\":{{$.FlowVariables.promptSetting.textToken}},\n    \"frequency_penalty\":0,\n    \"presence_penalty\":0,\n    \"messages\": [\n        {\n            \"role\": \"system\",\n            \"content\": \"ä½ æ˜¯ä¸€åå»£å‘Šæ–‡æ¡ˆæ’°å¯«äººå“¡ï¼Œè«‹ä»¥å°ˆæ¥­ã€æœ‰å‰µæ„çš„å›è¦†å»£å‘Šæ–‡æ¡ˆ\"\n        },\n        {\n            \"role\": \"user\",\n            \"content\": \"è«‹æ ¹æ“šä»¥ä¸‹è¨­å®šï¼Œæ˜ç¢ºä»¥é£Ÿç‰©ç›¸é—œçš„æœ‰æ©Ÿç‡•éº¥ç‰‡ç‚ºå»£å‘Šä¸»é«”ç”¢ç”Ÿä¸€å€‹å»£å‘Šæ–‡æ¡ˆï¼Œä¸¦å›å‚³å»£å‘Šæ–‡æ¡ˆçš„æ¨™é¡Œä»¥åŠå…§å®¹ï¼Œå»£å‘Šä¸»é¡Œï¼šç”¢å“å±•ç¤ºï¼Œå»£å‘Šé¡å‹ï¼šé£Ÿç‰©ï¼Œå—çœ¾å¹´é½¡å±¤ï¼šå¹´è¼•äºº(20-29)ï¼Œå—çœ¾æ€§åˆ¥ï¼šä¸æ‹˜ï¼Œå›è¦†é™åˆ¶åœ¨100å­—å…§ï¼Œä»¥ç¹é«”ä¸­æ–‡å›è¦†ã€ä¸ç”¨é¡¯ç¤ºå­—æ•¸ã€ç¦æ­¢äº‚ç¢¼åŠå…¶ä»–èªè¨€ï¼Œä¸¦å°‡å›è¦†çµæœä»¥JSONæ ¼å¼è¼¸å‡ºï¼Œæ ¼å¼å¦‚ä¸‹ï¼š{'title':å»£å‘Šæ¨™é¡Œ,'content':å»£å‘Šå…§å®¹}ï¼Œå›è¦†çµæœä¸åŒ…å«ä»»ä½•é¡å¤–çš„ç¬¦è™Ÿã€æ›è¡Œç¬¦è™Ÿï¼Œå›è¦†å…§å®¹ç¦æ­¢å«æœ‰'undefined'ã€æ€§æš—ç¤ºã€æš´åŠ›å­—çœ¼'\"\n        },\n        {\n            \"role\": \"assistant\",\n            \"content\": \"{'title':'å¥åº·ç¾å‘³çš„æœ‰æ©Ÿç‡•éº¥ç‰‡','content':'äº«å—æˆ‘å€‘çš„æœ‰æ©Ÿç‡•éº¥ç‰‡ï¼Œå¯Œå«ç‡Ÿé¤Šï¼Œä½å¡è·¯é‡Œï¼Œæ˜¯å¹´è¼•äººæ—©é¤å’Œé›¶é£Ÿçš„æœ€ä½³é¸æ“‡ã€‚é–‹å§‹å¥åº·çš„ä¸€å¤©ï¼Œå¾ä¸€ç¢—ç¾å‘³çš„ç‡•éº¥ç‰‡é–‹å§‹ï¼'}\"\n        },\n        {\n            \"role\": \"user\",\n            \"content\": \"è«‹æ ¹æ“šä»¥ä¸‹è¨­å®šï¼Œæ˜ç¢ºä»¥å®¶å…·ç›¸é—œçš„ä¸€å€‹å¯¦éš›ç‰©å“ç‚ºå»£å‘Šä¸»é«”ç”¢ç”Ÿä¸€å€‹å»£å‘Šæ–‡æ¡ˆï¼Œä¸¦å›å‚³å»£å‘Šæ–‡æ¡ˆçš„æ¨™é¡Œä»¥åŠå…§å®¹ï¼Œå»£å‘Šä¸»é¡Œï¼šå“ç‰Œæ•…äº‹ï¼Œå»£å‘Šé¡å‹ï¼šå®¶å…·ï¼Œå—çœ¾å¹´é½¡å±¤ï¼šå¹´è¼•äºº(20-29)ï¼Œå—çœ¾æ€§åˆ¥ï¼šä¸æ‹˜ï¼Œå›è¦†é™åˆ¶åœ¨100å­—å…§ï¼Œä»¥ç¹é«”ä¸­æ–‡å›è¦†ã€ä¸ç”¨é¡¯ç¤ºå­—æ•¸ã€ç¦æ­¢äº‚ç¢¼åŠå…¶ä»–èªè¨€ï¼Œä¸¦å°‡å›è¦†çµæœä»¥JSONæ ¼å¼è¼¸å‡ºï¼Œæ ¼å¼å¦‚ä¸‹ï¼š{'title':å»£å‘Šæ¨™é¡Œ,'content':å»£å‘Šå…§å®¹}ï¼Œå›è¦†çµæœä¸åŒ…å«ä»»ä½•é¡å¤–çš„ç¬¦è™Ÿã€æ›è¡Œç¬¦è™Ÿï¼Œå›è¦†å…§å®¹ç¦æ­¢å«æœ‰'undefined'ã€æ€§æš—ç¤ºã€æš´åŠ›å­—çœ¼'\"\n        },\n        {\n            \"role\": \"assistant\",\n            \"content\": \"{'title': 'å‰µæ„è¨­è¨ˆçš„å¤šåŠŸèƒ½æ²™ç™¼åºŠ','content': 'æˆ‘å€‘çš„å¤šåŠŸèƒ½æ²™ç™¼åºŠï¼Œä¸åƒ…çµåˆäº†ç¾ä»£è¨­è¨ˆèˆ‡å¯¦ç”¨æ€§ï¼Œé‚„èƒ½ç‚ºä½ çš„å®¶å¢æ·»é¢¨æ ¼å’Œä¾¿åˆ©ã€‚ç„¡è«–æ˜¯æ—¥å¸¸ä¼‘æ¯é‚„æ˜¯æ„å¤–ä¾†å®¢ï¼Œå®ƒéƒ½èƒ½è¼•é¬†æ»¿è¶³ä½ çš„éœ€æ±‚ã€‚é©åˆå¹´è¼•äººçš„ç¾ä»£ç”Ÿæ´»æ–¹å¼ï¼Œè®“å®¶æ›´åŠ èˆ’é©å’Œæº«é¦¨ã€‚'}\"\n        },\n        {\n            \"role\": \"user\",\n            \"content\": \"{{$.FlowVariables.promptSetting.prompt}}\"\n        }\n    ]\n}",
              "AssignValueType": "string.json"
            },
            {
              "_Id": "Variable_43korlctvz7ejsjrpjmr",
              "Type": "variable.set",
              "TriggerType": "after_node",
              "Variable": "adText",
              "VariableType": "flow",
              "AssignValue": "$.NodeOutput.Data",
              "AssignValueType": "variable"
            }
          ],
          "DiagramData": {
            "position": {
              "x": 1393.0829150959883,
              "y": -27.048232810256707
            },
            "size": {
              "width": 197,
              "height": 108
            }
          },
          "Message": {
            "_Id": "Content_irbb3jng6i0wvgx92mmr",
            "Type": "text",
            "QuickReply": [],
            "Text": "æ­£åœ¨ç”Ÿæˆå»£å‘Šæ–‡æ¡ˆï¼Œç´„éœ€30ç§’ï¼Œè«‹è€å¿ƒç­‰å€™..."
          },
          "FlowId": "Flow_686d8ae0-a122-4434-9ea3-4449bb121e5b"
        },
        {
          "Id": "Node_dw1zx7ok9u",
          "Type": "function",
          "Name": "è™•ç†æ–‡æ¡ˆprompt",
          "Delay": 0,
          "Actions": [
            {
              "_Id": "NodeAction_jyeplym6t270gvpjap7e",
              "Type": "none",
              "Rules": [],
              "Priority": 50,
              "NextNodeId": "Node_oozn4a179k"
            }
          ],
          "VariableActions": [
            {
              "_Id": "Variable_j4wkih71nrncu49ks0o8",
              "Type": "variable.set",
              "TriggerType": "after_node",
              "Variable": "promptSetting",
              "VariableType": "flow",
              "AssignValue": "$.NodeOutput.Data.Data",
              "AssignValueType": "variable"
            }
          ],
          "DiagramData": {
            "position": {
              "x": 993.6392492023017,
              "y": -16.694083481398856
            },
            "size": {
              "width": 197,
              "height": 88
            }
          },
          "ScriptType": "javascript",
          "ScriptCode": "/**\n * è«‹å°‡è¦åŸ·è¡Œçš„ç¨‹å¼ç¢¼æ’°å¯«æ–¼ä¸‹æ–¹æ–¹æ³•ä¸­ï¼Œ\n * ä¸¦å¯ä½¿ç”¨ variables ä¾†å–å¾—å‚³å…¥çš„åƒæ•¸ï¼Œå¦‚ 'variables.<name>'ï¼Œ\n * æœ€å¾Œè—‰ç”± return å›å‚³åŸ·è¡Œçµæœã€‚\n *\n * å¦å¤–ä¹Ÿå¯ä½¿ç”¨ã€Œæ¨¡æ“¬åŸ·è¡Œã€åŠã€Œæ¨¡æ“¬è¼¸å…¥ã€ä¾†æ¸¬è©¦ç¨‹å¼ç¢¼æœ‰ç„¡å•é¡Œã€‚\n */\n(variables) => {\n    let summarizeSetting = variables.summarizeSetting;\n    summarizeSetting.textToken = Math.floor(summarizeSetting.textLimit * 4);\n    let target = `æ˜ç¢ºä»¥${summarizeSetting.type}ç›¸é—œçš„ä¸€å€‹å¯¦éš›ç‰©å“`;\n    if (summarizeSetting.hasOwnProperty(\"target\")) {\n        target = `æ˜ç¢ºä»¥${summarizeSetting.type}çš„${summarizeSetting.target}`;\n    }\n    \n    let prompt = `è«‹æ ¹æ“šä»¥ä¸‹è¨­å®šï¼Œ${target}ç‚ºå»£å‘Šä¸»é«”ç”¢ç”Ÿä¸€å€‹å»£å‘Šæ–‡æ¡ˆï¼Œä¸¦å›å‚³å»£å‘Šçš„æ¨™é¡Œä»¥åŠå…§å®¹ï¼Œ`;\n\n    prompt += `å»£å‘Šä¸»é¡Œï¼š${summarizeSetting.topic}ï¼Œ`;\n    prompt += `å»£å‘Šé¡å‹ï¼š${summarizeSetting.type}ï¼Œ`;\n    prompt += `å—çœ¾å¹´é½¡å±¤ï¼š${summarizeSetting.age}ï¼Œ`;\n    prompt += `å—çœ¾æ€§åˆ¥ï¼š${summarizeSetting.sex}ï¼Œ`;\n    if (summarizeSetting.hasOwnProperty(\"info\")) {\n        prompt += `å—çœ¾ç‰¹è³ªï¼š${summarizeSetting.info}ï¼Œ`;\n    }\n    prompt += `å›è¦†é™åˆ¶åœ¨${summarizeSetting.textLimit}å­—å…§ï¼Œä¸¦è«‹ç›¡é‡æ¥è¿‘${summarizeSetting.textLimit}å­—ï¼Œä»¥ç¹é«”ä¸­æ–‡å›è¦†ã€ä¸ç”¨é¡¯ç¤ºå­—æ•¸ã€ç¦æ­¢äº‚ç¢¼åŠå…¶ä»–èªè¨€`;\n    prompt += `ï¼Œä¸¦å°‡å›è¦†çµæœä»¥JSONæ ¼å¼è¼¸å‡ºï¼Œæ ¼å¼å¦‚ä¸‹ï¼š{\"title\":å»£å‘Šæ¨™é¡Œ,\"content\":å»£å‘Šå…§å®¹}ï¼Œå›è¦†çµæœä¸åŒ…å«ä»»ä½•é¡å¤–çš„ç¬¦è™Ÿã€æ›è¡Œç¬¦è™Ÿï¼Œå›è¦†å…§å®¹ç¦æ­¢å«æœ‰\"undefined\"ã€æ€§æš—ç¤ºã€æš´åŠ›å­—çœ¼`;\n    summarizeSetting.prompt = prompt;\n    return summarizeSetting;\n};\n",
          "JavaScriptLibs": {
            "_Id": "Others_eintpe9202xqi7hxeoac"
          },
          "Arguments": [
            {
              "_Id": "Others_83bwb65ljvsi72ud5gay",
              "Name": "summarizeSetting",
              "Value": "{{$.FlowVariables.summarizeSetting}}",
              "Type": "use_expression",
              "_MockValue": {
                "action": "submit",
                "topic": "ç”¢å“å±•ç¤º",
                "type": "é£Ÿç‰©",
                "textLimit": "500",
                "age": "é’å°‘å¹´(13-19)",
                "sex": "ç”·",
                "info": "å¥èº«ç”·",
                "style": "ç§‘å¹»é¢¨æ ¼",
                "drawStyle": "natural",
                "resolution": "1792x1024",
                "quality": "stantdard"
              }
            }
          ]
        },
        {
          "Id": "Node_0fdg9be3e2",
          "Type": "flow.begin",
          "Name": "å‘¼å«ç”Ÿæˆåœ–ç‰‡API",
          "Delay": 0,
          "Actions": [
            {
              "_Id": "NodeAction_cpu0m4jn5nvex3ddc0n2",
              "Type": "none",
              "Rules": [],
              "Priority": 50,
              "NextNodeId": "Node_xhbkiln25y"
            }
          ],
          "VariableActions": [
            {
              "_Id": "Variable_y46uvnhpj7anplgpd056",
              "Type": "variable.set",
              "TriggerType": "after_node",
              "Variable": "imageUrl",
              "VariableType": "flow",
              "AssignValue": "$.NodeOutput.Data",
              "AssignValueType": "variable"
            }
          ],
          "DiagramData": {
            "position": {
              "x": 2091.8451377646766,
              "y": -27.462013068394807
            },
            "size": {
              "width": 197,
              "height": 108
            }
          },
          "Message": {
            "_Id": "Content_vobp5x0i3lq0m9rdu3zo",
            "Type": "text",
            "QuickReply": [],
            "Text": ""
          },
          "FlowId": "Flow_1d4f353e-29e3-4268-9da2-df7ff4178da9"
        },
        {
          "Id": "Node_xhbkiln25y",
          "Type": "function",
          "Name": "è™•ç†è¼¸å‡º",
          "Delay": 0,
          "Actions": [
            {
              "_Id": "NodeAction_6qnajdcs2bdmndzklfej",
              "Type": "none",
              "Rules": [],
              "Priority": 50,
              "NextNodeId": "Node_14l4l0ursx"
            }
          ],
          "VariableActions": [
            {
              "_Id": "Variable_ej33kh1cnkem33oazisk",
              "Type": "variable.set",
              "TriggerType": "after_node",
              "Variable": "output",
              "VariableType": "global",
              "AssignValue": "$.NodeOutput.Data.Data.output",
              "AssignValueType": "variable"
            },
            {
              "_Id": "Variable_tt4vrh7pmix5orj25iu8",
              "Type": "variable.set",
              "TriggerType": "after_node",
              "Variable": "hasInput",
              "VariableType": "global",
              "AssignValue": "true",
              "AssignValueType": "boolean"
            },
            {
              "_Id": "Variable_pb3hk5o0gm6g84wpj56g",
              "Type": "variable.set",
              "TriggerType": "after_node",
              "Variable": "cardResource",
              "VariableType": "flow",
              "AssignValue": "$.NodeOutput.Data.Data",
              "AssignValueType": "variable"
            }
          ],
          "DiagramData": {
            "position": {
              "x": 2438.178000549241,
              "y": -17.584372835847923
            },
            "size": {
              "width": 197,
              "height": 88
            }
          },
          "ScriptType": "javascript",
          "ScriptCode": "/**\n * è«‹å°‡è¦åŸ·è¡Œçš„ç¨‹å¼ç¢¼æ’°å¯«æ–¼ä¸‹æ–¹æ–¹æ³•ä¸­ï¼Œ\n * ä¸¦å¯ä½¿ç”¨ variables ä¾†å–å¾—å‚³å…¥çš„åƒæ•¸ï¼Œå¦‚ 'variables.<name>'ï¼Œ\n * æœ€å¾Œè—‰ç”± return å›å‚³åŸ·è¡Œçµæœã€‚\n *\n * å¦å¤–ä¹Ÿå¯ä½¿ç”¨ã€Œæ¨¡æ“¬åŸ·è¡Œã€åŠã€Œæ¨¡æ“¬è¼¸å…¥ã€ä¾†æ¸¬è©¦ç¨‹å¼ç¢¼æœ‰ç„¡å•é¡Œã€‚\n */\n(variables) => {\n    let adText=JSON.parse(variables.adText);\n    adText.url=variables.imageUrl;\n    adText.output=`${adText.title}\\n\\n${adText.content}`;\n    return adText;\n};\n",
          "JavaScriptLibs": {
            "_Id": "Others_3x5pcp7pubp140e33umx"
          },
          "Arguments": [
            {
              "_Id": "Others_nn62yrpdupqn28yai2ju",
              "Name": "adText",
              "Value": "{{$.FlowVariables.adText}}",
              "Type": "variable",
              "_MockValue": [
                {
                  "asd": 123
                },
                {}
              ]
            },
            {
              "_Id": "Others_3h18t1q7pcu8gn3iug9l",
              "Name": "imageUrl",
              "Value": "{{$.FlowVariables.imageUrl}}",
              "Type": "variable",
              "_MockValue": "123123"
            }
          ]
        },
        {
          "Id": "Node_14l4l0ursx",
          "Type": "prompt.text",
          "Name": "ç”¢ç”Ÿçµæœ",
          "Delay": 0,
          "Actions": [
            {
              "_Id": "NodeAction_teevczsj29fhaiq4ebhh",
              "Type": "and",
              "Rules": [
                {
                  "_Id": "Rule_jozmyu2p7i35xd7nak4q",
                  "Type": "jsonpath",
                  "isNegative": false,
                  "JsonPath": "$.Text",
                  "Rule": {
                    "_Id": "Rule_1mxi7lc1a7xrxzhg5qb9",
                    "Type": "text",
                    "isNegative": false,
                    "Condition": "exactly",
                    "IgnoreCase": false,
                    "Value": "å†æ¬¡ç”Ÿæˆ"
                  }
                }
              ],
              "Priority": 50,
              "NextNodeId": "Node_oozn4a179k"
            },
            {
              "_Id": "NodeAction_fq7kdun9wndvfq50s9ah",
              "Type": "and",
              "Rules": [
                {
                  "_Id": "Rule_jozmyu2p7i35xd7nak4q",
                  "Type": "jsonpath",
                  "isNegative": false,
                  "JsonPath": "$.Text",
                  "Rule": {
                    "_Id": "Rule_1mxi7lc1a7xrxzhg5qb9",
                    "Type": "text",
                    "isNegative": false,
                    "Condition": "exactly",
                    "IgnoreCase": false,
                    "Value": "ä¿®æ”¹æ¢ä»¶"
                  }
                }
              ],
              "Priority": 50,
              "NextNodeId": "Node_lmn3jn9qcv"
            }
          ],
          "VariableActions": [],
          "DiagramData": {
            "position": {
              "x": 1515.0775285392915,
              "y": 282.83408315348566
            },
            "size": {
              "width": 301,
              "height": 188
            }
          },
          "Prompt": {
            "_Id": "Content_ygzddb84xfdj9wjmjcqq",
            "Type": "hero.card",
            "QuickReply": [
              {
                "_Id": "Others_eyunbyo35013ctjag9rv",
                "Type": "imBack",
                "Title": "å†æ¬¡ç”Ÿæˆ",
                "Value": "å†æ¬¡ç”Ÿæˆ",
                "_LinkNodeActionId": "NodeAction_eygeujq7cdcuk2fus0h2",
                "_LinkNodeActionRuleId": "Rule_fz6gyxsx6wtpfazfixr6"
              },
              {
                "_Id": "Others_s4injtienlpvhslh7zpi",
                "Type": "imBack",
                "Title": "ä¿®æ”¹æ¢ä»¶",
                "Value": "ä¿®æ”¹æ¢ä»¶",
                "_LinkNodeActionId": "NodeAction_71516k4lwvh54mh8vpbh",
                "_LinkNodeActionRuleId": "Rule_lmyk4zv0hvgh99kxhu2y"
              },
              {
                "_Id": "Others_al99sr4h07unudvc1etf",
                "Type": "imBack",
                "Title": "æ–‡ç« æ‘˜è¦",
                "Value": "æ–‡ç« æ‘˜è¦",
                "_LinkNodeActionId": "NodeAction_c0a0hh367u5h3sc7n6gg",
                "_LinkNodeActionRuleId": "Rule_efjtfetbtp7mhahofq4u"
              },
              {
                "_Id": "Others_waz0jx7abschfnsp3aae",
                "Type": "imBack",
                "Title": "å¤šèªç³»ç¿»è­¯",
                "Value": "å¤šèªç³»ç¿»è­¯",
                "_LinkNodeActionId": "NodeAction_j50hqm6rdhi69g4ydlwj",
                "_LinkNodeActionRuleId": "Rule_zt6ehwfrep2kwjv0v44b"
              },
              {
                "_Id": "Others_ssundqom6swbehyml7x1",
                "Type": "imBack",
                "Title": "æ–‡å­—è½‰èªéŸ³",
                "Value": "æ–‡å­—è½‰èªéŸ³",
                "_LinkNodeActionId": "NodeAction_f4cbi28j3c2jzx9msk4p",
                "_LinkNodeActionRuleId": "Rule_8xhq2w5c0ai0zogrs5z0"
              }
            ],
            "Title": "{{$.FlowVariables.cardResource.title}}",
            "Text": "{{$.FlowVariables.cardResource.content}}  ",
            "Subtitle": "",
            "ImageUrl": "{{$.FlowVariables.cardResource.url}}",
            "Buttons": []
          },
          "Retry": {
            "_Id": "Content_sv9w2h85neck0xahlejp",
            "Type": "text",
            "QuickReply": []
          },
          "Validator": {
            "_Id": "PromptValidator_n37jhfv58vo5p6nm89w7",
            "Type": "intersection",
            "Rules": []
          }
        },
        {
          "Id": "Node_3g6ms5f0uy",
          "Type": "variable",
          "Name": "è¨­å®šåˆå§‹å€¼",
          "Delay": 0,
          "Actions": [
            {
              "_Id": "NodeAction_quj9mj5zoexhclwa0253",
              "Type": "none",
              "Rules": [],
              "Priority": 50,
              "NextNodeId": "Node_lmn3jn9qcv"
            }
          ],
          "VariableActions": [
            {
              "_Id": "Variable_uxwh6rfyb17y9t446cvl",
              "Type": "variable.set",
              "TriggerType": "before_node",
              "Variable": "summarizeSetting",
              "VariableType": "flow",
              "AssignValue": {
                "topic": "ç”¢å“å±•ç¤º",
                "type": "æ—¥å¸¸ç”¨å“",
                "target": "",
                "textLimit": 50,
                "age": "å¹´è¼•äºº(20-29)",
                "sex": "ä¸æ‹˜",
                "info": "",
                "style": "è‡ªç„¶é¢¨æ ¼",
                "drawStyle": "natural",
                "resolution": "1024x1024",
                "quality": "standard",
                "isShowText": "é¡¯ç¤ºæ–‡å­—"
              },
              "AssignValueType": "string.json"
            }
          ],
          "DiagramData": {
            "position": {
              "x": 172.33784945869144,
              "y": -13.7088608315822
            },
            "size": {
              "width": 0,
              "height": 0
            }
          }
        },
        {
          "Id": "Node_lmn3jn9qcv",
          "Type": "prompt.text",
          "Name": "æ–‡ç« æ‘˜è¦è¨­å®š(ac)",
          "Delay": 0,
          "Actions": [
            {
              "_Id": "NodeAction_m6kih3qnj2bgxh714cti",
              "Type": "none",
              "Rules": [],
              "Priority": 50,
              "NextNodeId": "Node_dw1zx7ok9u"
            }
          ],
          "VariableActions": [
            {
              "_Id": "Variable_vepwwzmjw6ln77mep390",
              "Type": "variable.set",
              "TriggerType": "after_node",
              "Variable": "summarizeSetting",
              "VariableType": "flow",
              "AssignValue": "$.Message.Value",
              "AssignValueType": "variable"
            },
            {
              "_Id": "Variable_2mh6sb6i1z9mayriow0w",
              "Type": "variable.set",
              "TriggerType": "before_node",
              "Variable": "cardResource",
              "VariableType": "flow",
              "AssignValue": "{\n    \"adSetting\":{{$.Configs.adSetting}},\n    \"summarizeSetting\":{{$.FlowVariables.summarizeSetting}}\n}",
              "AssignValueType": "string.json"
            }
          ],
          "DiagramData": {
            "position": {
              "x": 525.304328844973,
              "y": -372.05995083933414
            },
            "size": {
              "width": 358,
              "height": 717
            }
          },
          "Prompt": {
            "_Id": "Content_1oszfqk16ydqm9blr9ds",
            "Type": "adaptive.card",
            "QuickReply": [
              {
                "_Id": "Others_09t6oz2b7ivq2rfg4zyz",
                "Type": "imBack",
                "Title": "è¿”å›ä¸»é¸å–®",
                "Value": "è¿”å›ä¸»é¸å–®",
                "_LinkNodeActionId": "NodeAction_thk60kiz3vdhw4zb4vht",
                "_LinkNodeActionRuleId": "Rule_87hztucjcos3eivjx9yj"
              }
            ],
            "Text": "",
            "Content": {
              "type": "AdaptiveCard",
              "$schema": "http://adaptivecards.io/schemas/adaptive-card.json",
              "version": "1.3",
              "body": [
                {
                  "type": "Container",
                  "items": [
                    {
                      "type": "TextBlock",
                      "text": "å»£å‘Šç”Ÿæˆè¨­å®š",
                      "wrap": true,
                      "horizontalAlignment": "Center",
                      "id": "header",
                      "size": "Large",
                      "weight": "Bolder",
                      "color": "Accent"
                    },
                    {
                      "type": "Container",
                      "items": [
                        {
                          "type": "Container",
                          "items": [
                            {
                              "type": "TextBlock",
                              "text": "å»£å‘Šæ–‡æ¡ˆğŸ“ƒ",
                              "wrap": true,
                              "size": "Medium",
                              "weight": "Bolder",
                              "color": "Accent"
                            }
                          ]
                        },
                        {
                          "type": "ColumnSet",
                          "columns": [
                            {
                              "type": "Column",
                              "width": "stretch",
                              "items": [
                                {
                                  "type": "Input.ChoiceSet",
                                  "choices": [
                                    {
                                      "$data": "${adSetting.topic}",
                                      "title": "${name}",
                                      "value": "${value}"
                                    }
                                  ],
                                  "label": "ä¸»é¡Œï¼š",
                                  "id": "topic",
                                  "value": "${summarizeSetting.topic}",
                                  "isRequired": true,
                                  "errorMessage": "æ–‡æ¡ˆä¸»é¡Œç‚ºå¿…å¡«æ¬„ä½"
                                }
                              ]
                            },
                            {
                              "type": "Column",
                              "width": "stretch",
                              "items": [
                                {
                                  "type": "Input.ChoiceSet",
                                  "choices": [
                                    {
                                      "$data": "${adSetting.type}",
                                      "title": "${name}",
                                      "value": "${value}"
                                    }
                                  ],
                                  "label": "é¡å‹ï¼š",
                                  "id": "type",
                                  "value": "${summarizeSetting.type}",
                                  "isRequired": true,
                                  "errorMessage": "æ–‡æ¡ˆé¡å‹ç‚ºå¿…å¡«æ¬„ä½"
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "ColumnSet",
                          "columns": [
                            {
                              "type": "Column",
                              "width": "stretch",
                              "items": [
                                {
                                  "type": "Input.Text",
                                  "placeholder": "è«‹è¼¸å…¥å»£å‘Šä¸»é«”",
                                  "value": "${if(exists(summarizeSetting.target),summarizeSetting.target,'')}",
                                  "id": "target",
                                  "label": "ä¸»é«”ï¼ˆç”¢å“ï¼‰ï¼š",
                                  "errorMessage": "æ–‡æ¡ˆä¸»é«”ç‚ºå¿…å¡«æ¬„ä½"
                                }
                              ]
                            },
                            {
                              "type": "Column",
                              "width": "stretch",
                              "items": [
                                {
                                  "type": "Input.Number",
                                  "placeholder": "è«‹è¼¸å…¥å­—æ•¸é™åˆ¶",
                                  "label": "å­—æ•¸é™åˆ¶ï¼š",
                                  "id": "textLimit",
                                  "errorMessage": "å­—æ•¸é™åˆ¶ç‚ºå¿…å¡«æ¬„ä½",
                                  "value": "${summarizeSetting.textLimit}",
                                  "max": 2000,
                                  "min": 0,
                                  "isRequired": true
                                }
                              ]
                            }
                          ]
                        }
                      ]
                    },
                    {
                      "type": "Container",
                      "items": [
                        {
                          "type": "Container",
                          "items": [
                            {
                              "type": "TextBlock",
                              "text": "å—çœ¾ğŸ˜Š",
                              "wrap": true,
                              "size": "Medium",
                              "weight": "Bolder",
                              "color": "Accent"
                            }
                          ]
                        },
                        {
                          "type": "ColumnSet",
                          "columns": [
                            {
                              "type": "Column",
                              "width": "stretch",
                              "items": [
                                {
                                  "type": "Input.ChoiceSet",
                                  "choices": [
                                    {
                                      "$data": "${adSetting.age}",
                                      "title": "${name}",
                                      "value": "${value}"
                                    }
                                  ],
                                  "label": "å¹´é½¡å±¤ï¼š",
                                  "id": "age",
                                  "value": "${summarizeSetting.age}",
                                  "isRequired": true,
                                  "errorMessage": "å¹´é½¡å±¤ç‚ºå¿…å¡«æ¬„ä½"
                                }
                              ]
                            },
                            {
                              "type": "Column",
                              "width": "stretch",
                              "items": [
                                {
                                  "type": "Input.ChoiceSet",
                                  "choices": [
                                    {
                                      "$data": "${adSetting.sex}",
                                      "title": "${name}",
                                      "value": "${value}"
                                    }
                                  ],
                                  "label": "æ€§åˆ¥ï¼š",
                                  "id": "sex",
                                  "isRequired": true,
                                  "errorMessage": "æ€§åˆ¥ç‚ºå¿…å¡«æ¬„ä½",
                                  "value": "${summarizeSetting.sex}"
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "Input.Text",
                          "placeholder": "è«‹è¼¸å…¥å—çœ¾èƒŒæ™¯ç‰¹è³ª",
                          "label": "èƒŒæ™¯ç‰¹è³ªï¼š",
                          "value": "${if(exists(summarizeSetting.info),summarizeSetting.info,'')}",
                          "id": "info"
                        }
                      ],
                      "separator": true,
                      "spacing": "Medium"
                    },
                    {
                      "type": "Container",
                      "items": [
                        {
                          "type": "Container",
                          "items": [
                            {
                              "type": "TextBlock",
                              "text": "å»£å‘Šåœ–ç‰‡âœ¨ï¸",
                              "wrap": true,
                              "weight": "Bolder",
                              "size": "Medium",
                              "color": "Accent"
                            }
                          ]
                        },
                        {
                          "type": "ColumnSet",
                          "columns": [
                            {
                              "type": "Column",
                              "width": "stretch",
                              "items": [
                                {
                                  "type": "Input.ChoiceSet",
                                  "choices": [
                                    {
                                      "$data": "${adSetting.style}",
                                      "title": "${name}",
                                      "value": "${value}"
                                    }
                                  ],
                                  "label": "é¢¨æ ¼ï¼š",
                                  "id": "style",
                                  "value": "${summarizeSetting.style}",
                                  "errorMessage": "é¢¨æ ¼ç‚ºå¿…å¡«æ¬„ä½",
                                  "isRequired": true
                                }
                              ]
                            },
                            {
                              "type": "Column",
                              "width": "stretch",
                              "items": [
                                {
                                  "type": "Input.ChoiceSet",
                                  "choices": [
                                    {
                                      "$data": "${adSetting.drawStyle}",
                                      "title": "${name}",
                                      "value": "${value}"
                                    }
                                  ],
                                  "id": "drawStyle",
                                  "label": "ç•«é¢¨ï¼š",
                                  "value": "${summarizeSetting.drawStyle}",
                                  "isRequired": true,
                                  "errorMessage": "ç•«é¢¨ç‚ºå¿…å¡«æ¬„ä½"
                                }
                              ]
                            }
                          ]
                        },
                        {
                          "type": "ColumnSet",
                          "columns": [
                            {
                              "type": "Column",
                              "width": "stretch",
                              "items": [
                                {
                                  "type": "Input.ChoiceSet",
                                  "choices": [
                                    {
                                      "$data": "${adSetting.quality}",
                                      "title": "${name}",
                                      "value": "${value}"
                                    }
                                  ],
                                  "label": "ç•«è³ªï¼š",
                                  "id": "quality",
                                  "value": "${summarizeSetting.quality}",
                                  "isRequired": true,
                                  "errorMessage": "ç•«è³ªç‚ºå¿…å¡«æ¬„ä½"
                                }
                              ]
                            },
                            {
                              "type": "Column",
                              "width": "stretch",
                              "items": [
                                {
                                  "type": "Input.ChoiceSet",
                                  "choices": [
                                    {
                                      "$data": "${adSetting.resolution}",
                                      "title": "${name}",
                                      "value": "${value}"
                                    }
                                  ],
                                  "label": "è§£æåº¦ï¼š",
                                  "id": "resolution",
                                  "value": "${summarizeSetting.resolution}",
                                  "isRequired": true,
                                  "errorMessage": "è§£æåº¦ç‚ºå¿…å¡«æ¬„ä½"
                                }
                              ]
                            }
                          ]
                        }
                      ],
                      "separator": true,
                      "spacing": "Medium"
                    },
                    {
                      "type": "ActionSet",
                      "actions": [
                        {
                          "type": "Action.Submit",
                          "title": "é€å‡º",
                          "data": {
                            "action": "submit"
                          }
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            "DataSource": "$.FlowVariables.cardResource"
          },
          "Retry": {
            "_Id": "Content_pb70xxno5j3aueyxywwh",
            "Type": "text",
            "QuickReply": []
          },
          "Validator": {
            "_Id": "PromptValidator_6yagqwk7tw2yf4widj5k",
            "Type": "intersection",
            "Rules": []
          }
        },
        {
          "Id": "Node_d6ydx5tek3",
          "Type": "function",
          "Name": "è™•ç†æ–‡æ¡ˆçµæœ",
          "Delay": 1000,
          "Actions": [
            {
              "_Id": "NodeAction_rpi4ore4uuulgu0bh1hz",
              "Type": "none",
              "Rules": [],
              "Priority": 50,
              "NextNodeId": "Node_0fdg9be3e2"
            }
          ],
          "VariableActions": [
            {
              "_Id": "Variable_sm2nkv1i5pa8omtg8lh4",
              "Type": "variable.set",
              "TriggerType": "after_node",
              "Variable": "callCondition",
              "VariableType": "global",
              "AssignValue": "$.NodeOutput.Data.Data",
              "AssignValueType": "variable"
            }
          ],
          "DiagramData": {
            "position": {
              "x": 1706.4049599387429,
              "y": -14.2528944535689
            },
            "size": {
              "width": 197,
              "height": 88
            }
          },
          "ScriptType": "javascript",
          "ScriptCode": "/**\n * è«‹å°‡è¦åŸ·è¡Œçš„ç¨‹å¼ç¢¼æ’°å¯«æ–¼ä¸‹æ–¹æ–¹æ³•ä¸­ï¼Œ\n * ä¸¦å¯ä½¿ç”¨ variables ä¾†å–å¾—å‚³å…¥çš„åƒæ•¸ï¼Œå¦‚ 'variables.<name>'ï¼Œ\n * æœ€å¾Œè—‰ç”± return å›å‚³åŸ·è¡Œçµæœã€‚\n *\n * å¦å¤–ä¹Ÿå¯ä½¿ç”¨ã€Œæ¨¡æ“¬åŸ·è¡Œã€åŠã€Œæ¨¡æ“¬è¼¸å…¥ã€ä¾†æ¸¬è©¦ç¨‹å¼ç¢¼æœ‰ç„¡å•é¡Œã€‚\n */\n(variables) => {\n    let promptSetting = variables.promptSetting;\n    let adText=JSON.parse(variables.adText);\n    return {\n        prompt: `è«‹æ ¹æ“šä»¥ä¸‹è¨­å®šç”¢ç”Ÿå»£å‘Šåœ–ç‰‡ï¼Œåœ–ç‰‡ä¸Šé¡¯ç¤ºæ¸…æ™°çš„æ–‡å­—ä¸¦ä¿®æ­£å­—è©çš„æ­£ç¢ºæ€§ï¼Œå»£å‘Šé¢¨æ ¼ï¼š${promptSetting.style}ï¼Œå»£å‘Šæ¨™é¡Œï¼š${adText.title}ï¼Œå»£å‘Šå…§å®¹ï¼š${adText.content}ï¼Œåœ–ç‰‡è§£æåº¦ï¼š${promptSetting.resolution}ï¼Œåœ–ç‰‡å»é™¤ç™½é‚Šï¼Œå°‡å…§å®¹å¡«æ»¿æ•´å¼µåœ–ç‰‡`,\n        size: promptSetting.resolution,\n        quality: promptSetting.quality,\n        style: promptSetting.drawStyle\n    };\n};\n",
          "JavaScriptLibs": {
            "_Id": "Others_3x5pcp7pubp140e33umx"
          },
          "Arguments": [
            {
              "_Id": "Others_nn62yrpdupqn28yai2ju",
              "Name": "adText",
              "Value": "{{$.FlowVariables.adText}}",
              "Type": "variable",
              "_MockValue": {
                "asd": "123"
              }
            },
            {
              "_Id": "Others_x3q8s9ajnkjf5ey3nf3e",
              "Name": "promptSetting",
              "Value": "{{$.FlowVariables.promptSetting}}",
              "Type": "variable",
              "_MockValue": "{{$.FlowVariables.summarizeSetting}}"
            }
          ]
        }
      ]
    }